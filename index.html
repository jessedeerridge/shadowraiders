<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>中央六角形＋外周五角形6（左に狭い長方形）</title>
<style>
  html,body{height:100%;margin:0;background:#fff}
  svg{display:block;margin:auto;max-width:96vmin;height:auto}
  .shape{fill:#fff;stroke:#111;stroke-width:0.8;stroke-linejoin:round;stroke-linecap:round}
</style>
</head>
<body>
<svg id="art" viewBox="-220 -230 440 460" aria-label="左に長方形・右に星形"></svg>

<script>
const svg = document.getElementById('art');
const rt3 = Math.sqrt(3);

// ---- パラメータ ----
const s0 = 48;   // 中央六角形の一辺
const s1 = 82;   // 中間六角形の一辺
const rectScale = 0.40; // ← 幅を元の0.60から 2/3 に狭めた
const gap = 20;         // 星との間隔

function hexFlat(cx, cy, s){
  const h = (rt3/2)*s;
  return [
    [cx+s,   cy],
    [cx+s/2, cy+h],
    [cx-s/2, cy+h],
    [cx-s,   cy],
    [cx-s/2, cy-h],
    [cx+s/2, cy-h],
  ];
}

// 星グループ
const g = document.createElementNS('http://www.w3.org/2000/svg','g');
g.setAttribute('id','star');
svg.appendChild(g);

function poly(pts){
  const el = document.createElementNS('http://www.w3.org/2000/svg','polygon');
  el.setAttribute('points', pts.map(p=>p.join(',')).join(' '));
  el.setAttribute('class','shape');
  g.appendChild(el);
}

const add=(a,b)=>[a[0]+b[0],a[1]+b[1]];
const sub=(a,b)=>[a[0]-b[0],a[1]-b[1]];
const mul=(a,k)=>[a[0]*k,a[1]*k];
const norm=(v)=>{ const L=Math.hypot(v[0],v[1])||1; return [v[0]/L,v[1]/L]; };

function intersectRayRay(p,u,q,v){
  const A = [[u[0], -v[0]], [u[1], -v[1]]];
  const b = sub(q,p);
  const det = A[0][0]*A[1][1] - A[0][1]*A[1][0];
  const t = ( b[0]*A[1][1] - b[1]*A[0][1]) / det;
  return add(p, mul(u, t));
}

// 星形
const H0 = hexFlat(0,0,s0);
const H1 = hexFlat(0,0,s1);
poly(H0);
for(let i=0;i<6;i++){
  const ip=(i+5)%6, inx=(i+1)%6, inx2=(i+2)%6;
  const a0=H0[i], b0=H0[inx], a1=H1[i], b1=H1[inx];
  const dirFromA1=norm(sub(H1[i],H1[ip]));
  const dirFromB1=norm(sub(H1[inx2],H1[inx]));
  const tip=intersectRayRay(a1,dirFromA1,b1,dirFromB1);
  poly([a0,b0,b1,tip,a1]);
}

// 左の長方形
const starBox = g.getBBox();
const rectH = starBox.height;
const rectW = rectH * rectScale;  // 幅を縮小
const rectX = starBox.x - gap - rectW;
const rectY = starBox.y;

const rect = document.createElementNS('http://www.w3.org/2000/svg','rect');
rect.setAttribute('x', rectX);
rect.setAttribute('y', rectY);
rect.setAttribute('width', rectW);
rect.setAttribute('height', rectH);
rect.setAttribute('class','shape');
svg.appendChild(rect);

// viewBox調整
(function fit(){
  const pad=14, box=svg.getBBox();
  svg.setAttribute('viewBox',
    [box.x-pad, box.y-pad, box.width+pad*2, box.height+pad*2].join(' ')
  );
})();
</script>
</body>
</html>
